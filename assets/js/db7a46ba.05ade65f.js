"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2005],{1247:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>n,metadata:()=>a,toc:()=>d});var i=o(5893),r=o(1151);const n={title:"Repositories and HTTP Proxies \u26a1\ufe0f",sidebar_position:51},t=void 0,a={id:"guides/repositories",title:"Repositories and HTTP Proxies \u26a1\ufe0f",description:"Scala CLI downloads the dependencies declared in your projects using Coursier.",source:"@site/docs/guides/repositories.md",sourceDirName:"guides",slug:"/guides/repositories",permalink:"/docs/guides/repositories",draft:!1,unlisted:!1,editUrl:"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/guides/repositories.md",tags:[],version:"current",sidebarPosition:51,frontMatter:{title:"Repositories and HTTP Proxies \u26a1\ufe0f",sidebar_position:51},sidebar:"tutorialSidebar",previous:{title:"Offline mode \u26a1\ufe0f",permalink:"/docs/guides/offline"},next:{title:"Markdown \u26a1\ufe0f",permalink:"/docs/guides/markdown"}},c={},d=[{value:"Custom repositories",id:"custom-repositories",level:2},{value:"Repository Authentication",id:"repository-authentication",level:2},{value:"Default repositories",id:"default-repositories",level:2},{value:"HTTP proxies",id:"http-proxies",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Authentication",id:"authentication",level:3},{value:"Mirrors",id:"mirrors",level:2}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:["Scala CLI downloads the dependencies declared in your projects using ",(0,i.jsx)(s.a,{href:"https://get-coursier.io/",children:"Coursier"}),".\nThe default repositories being searched are the Maven Central and local Ivy repository on your machine.\nIf additional repositories are required it is possible to declare them:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["on the command line with ",(0,i.jsx)(s.code,{children:"--repository"})," or ",(0,i.jsx)(s.code,{children:"--repo"})," or just ",(0,i.jsx)(s.code,{children:"-r"})]}),"\n",(0,i.jsxs)(s.li,{children:["with the ",(0,i.jsx)(s.code,{children:"//> using repositories"})," directive"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"The values can be names of predefined repositories accepted by Coursier, some of which are:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"sonatype:_value_"})," and ",(0,i.jsx)(s.code,{children:"sonatype-s01:_value_"})," for Sonatype servers e.g. ",(0,i.jsx)(s.code,{children:"sonatype:snapshots"}),"\nsnapshots from both servers are searched when using ",(0,i.jsx)(s.code,{children:"snapshots"})]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"jitpack"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"m2Local"})}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"custom-repositories",children:"Custom repositories"}),"\n",(0,i.jsxs)(s.p,{children:["Supplying the address of custom repositories is also accepted when using ",(0,i.jsx)(s.code,{children:"--repository"})," or ",(0,i.jsx)(s.code,{children:"//> using repositories"}),".\nTo do so, provide the URL to the repository's root, e.g. ",(0,i.jsx)(s.code,{children:"https://maven.pkg.github.com/USER/REPO"})," for GitHub Package Registry.\nBy default, custom repositories are treated as Maven repositories, to specify an Ivy repository, prefix the address with ",(0,i.jsx)(s.code,{children:"ivy:"})," and supply the ivy pattern at the end e.g. ",(0,i.jsx)(s.code,{children:"ivy:http://localhost:8081/repository/ivy-releases/[defaultPattern]"}),"."]}),"\n",(0,i.jsxs)(s.admonition,{type:"tip",children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"[defaultPattern]"})," gets expanded by Coursier to:"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-text",children:"    [organisation]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]\n"})})]}),"\n",(0,i.jsx)(s.h2,{id:"repository-authentication",children:"Repository Authentication"}),"\n",(0,i.jsxs)(s.admonition,{type:"caution",children:[(0,i.jsxs)(s.p,{children:["Even though the ",(0,i.jsx)(s.code,{children:"config"})," command is not restricted, some available configuration keys may be, and thus may\nrequire setting the ",(0,i.jsx)(s.code,{children:"--power"})," option to be used.\nThat includes the configuration key tied to repositories settings, like ",(0,i.jsx)(s.code,{children:"repositories.credentials"})," and others.\nYou can pass the ",(0,i.jsx)(s.code,{children:"--power"})," option explicitly or set it globally by running:"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:"ignore",children:"scala-cli config power true\n"})})]}),"\n",(0,i.jsx)(s.p,{children:"Repository authentication is also supported and there are a couple ways of using it:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["specifying credentials for each host in ",(0,i.jsx)(s.code,{children:"COURSIER_CREDENTIALS"})," environment variable or in the ",(0,i.jsx)(s.code,{children:"coursier.credentials"})," java property (",(0,i.jsx)(s.a,{href:"/docs/guides/java-properties",children:"read more here"}),"),\nthe supported format in this case is ",(0,i.jsx)(s.code,{children:"host-address username:password"}),", e.g. ",(0,i.jsx)(s.code,{children:"my_domain.com MyUserName:myPasswOrd"})]}),"\n",(0,i.jsxs)(s.li,{children:["adding config entries for each host, this can be done using ",(0,i.jsx)(s.code,{children:"scala-cli --power config repositories.credentials host _username_ _password_"}),",\nusername and password values should follow the ",(0,i.jsx)(s.a,{href:"/docs/reference/password-options",children:"password option format"}),", e.g."]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:"ignore",children:"  scala-cli --power config repositories.credentials maven.pkg.github.com value:PrivateToken env:GH_TOKEN\n"})}),"\n",(0,i.jsx)(s.h2,{id:"default-repositories",children:"Default repositories"}),"\n",(0,i.jsx)(s.p,{children:"You can override the default Coursier repositories globally by invoking:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:"ignore",children:"scala-cli --power config repositories.default https://first-repo.company.com https://second-repo.company.com\n"})}),"\n",(0,i.jsx)(s.h2,{id:"http-proxies",children:"HTTP proxies"}),"\n",(0,i.jsxs)(s.admonition,{type:"caution",children:[(0,i.jsxs)(s.p,{children:["Even though the ",(0,i.jsx)(s.code,{children:"config"})," command is not restricted, some available configuration keys may be, and thus may\nrequire setting the ",(0,i.jsx)(s.code,{children:"--power"})," option to be used.\nThat includes configuration keys tied to setting up proxies, like ",(0,i.jsx)(s.code,{children:"httpProxy.address"})," and others.\nYou can pass the ",(0,i.jsx)(s.code,{children:"--power"})," option explicitly or set it globally by running:"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:"ignore",children:"scala-cli config power true\n"})})]}),"\n",(0,i.jsx)(s.h3,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(s.p,{children:"If you can only download artifacts through a proxy, you need to configure it beforehand, like"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:"ignore",children:"scala-cli --power config httpProxy.address http://proxy.company.com\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Replace ",(0,i.jsx)(s.code,{children:"proxy.company.com"})," by the address of your proxy."]}),"\n",(0,i.jsxs)(s.p,{children:["Change ",(0,i.jsx)(s.code,{children:"http://"})," to ",(0,i.jsx)(s.code,{children:"https://"})," if your proxy is accessible via HTTPS."]}),"\n",(0,i.jsx)(s.h3,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsx)(s.p,{children:"If your proxy requires authentication, set your user and password with"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:"ignore",children:"scala-cli --power config httpProxy.user value:_encoded_user_\nscala-cli --power config httpProxy.password value:_encoded_password_\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Replace ",(0,i.jsx)(s.code,{children:"_encoded_user_"})," and ",(0,i.jsx)(s.code,{children:"_encoded_password_"})," by your actual user and password, following\nthe ",(0,i.jsx)(s.a,{href:"/docs/reference/password-options",children:"password option format"}),". They should typically look like\n",(0,i.jsx)(s.code,{children:"env:ENV_VAR_NAME"}),", ",(0,i.jsx)(s.code,{children:"file:/path/to/file"}),", or ",(0,i.jsx)(s.code,{children:"command:command to run"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"mirrors",children:"Mirrors"}),"\n",(0,i.jsx)(s.p,{children:"If you're fine directly downloading artifacts from the internet, but would rather have some\nrepositories requests go through a repository of yours, configure mirror repositories, like"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:"ignore",children:"scala-cli --power config repositories.mirrors https://repo1.maven.org/maven2=https://repository.company.com/maven\n"})}),"\n",(0,i.jsx)(s.p,{children:"To have all requests to a Maven repository go through a repository of yours, do"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:"ignore",children:"scala-cli --power config repositories.mirrors maven:*=https://repository.company.com/maven\n"})})]})}function h(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},1151:(e,s,o)=>{o.d(s,{Z:()=>a,a:()=>t});var i=o(7294);const r={},n=i.createContext(r);function t(e){const s=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(n.Provider,{value:s},e.children)}}}]);